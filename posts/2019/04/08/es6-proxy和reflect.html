<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ğŸš€ES6  Proxyå’ŒReflect | PINEHE-BLOG</title>
    <meta name="description" content="å½“æˆ‘æ²‰é»˜çš„æ—¶å€™ï¼Œæˆ‘è§‰å¾—å¾ˆå……å®ï¼Œå½“æˆ‘å¼€å£è¯´è¯ï¼Œå°±æ„Ÿåˆ°äº†ç©ºè™šã€‚">
    
    
    <link rel="preload" href="/blog/assets/js/vendor.vue.5f1db0b8.js" as="script"><link rel="preload" href="/blog/assets/css/1.styles.62f82482.css" as="style"><link rel="preload" href="/blog/assets/js/vendor.commons.62f82482.js" as="script"><link rel="preload" href="/blog/assets/css/styles.fe65c3d9.css" as="style"><link rel="preload" href="/blog/assets/js/app.fe65c3d9.js" as="script"><link rel="preload" href="/blog/assets/css/styles.fe65c3d9.css" as="style"><link rel="preload" href="/blog/assets/css/8.styles.b27390c7.css" as="style"><link rel="preload" href="/blog/assets/js/8.b27390c7.js" as="script"><link rel="preload" href="/blog/assets/js/27.a32093da.js" as="script"><link rel="prefetch" href="/blog/assets/css/0.styles.3df2d085.css"><link rel="prefetch" href="/blog/assets/css/4.styles.a55d13b0.css"><link rel="prefetch" href="/blog/assets/css/5.styles.f5cce582.css"><link rel="prefetch" href="/blog/assets/css/6.styles.72588e95.css"><link rel="prefetch" href="/blog/assets/css/7.styles.6c9f8648.css"><link rel="prefetch" href="/blog/assets/js/0.3df2d085.js"><link rel="prefetch" href="/blog/assets/js/10.593b99a1.js"><link rel="prefetch" href="/blog/assets/js/11.5fc3c348.js"><link rel="prefetch" href="/blog/assets/js/12.8523f4b0.js"><link rel="prefetch" href="/blog/assets/js/13.2b0155fa.js"><link rel="prefetch" href="/blog/assets/js/14.4289d8c1.js"><link rel="prefetch" href="/blog/assets/js/15.84b27882.js"><link rel="prefetch" href="/blog/assets/js/16.8c2128b8.js"><link rel="prefetch" href="/blog/assets/js/17.3a1e5861.js"><link rel="prefetch" href="/blog/assets/js/18.1ccb3259.js"><link rel="prefetch" href="/blog/assets/js/19.63af8e22.js"><link rel="prefetch" href="/blog/assets/js/20.e6edaef8.js"><link rel="prefetch" href="/blog/assets/js/21.ed785718.js"><link rel="prefetch" href="/blog/assets/js/22.d2c06802.js"><link rel="prefetch" href="/blog/assets/js/23.5325aee8.js"><link rel="prefetch" href="/blog/assets/js/24.dbb5878a.js"><link rel="prefetch" href="/blog/assets/js/25.169bfe23.js"><link rel="prefetch" href="/blog/assets/js/26.23e44f9c.js"><link rel="prefetch" href="/blog/assets/js/28.3b2289e5.js"><link rel="prefetch" href="/blog/assets/js/29.343b0704.js"><link rel="prefetch" href="/blog/assets/js/30.eaccaf93.js"><link rel="prefetch" href="/blog/assets/js/4.a55d13b0.js"><link rel="prefetch" href="/blog/assets/js/5.f5cce582.js"><link rel="prefetch" href="/blog/assets/js/6.72588e95.js"><link rel="prefetch" href="/blog/assets/js/7.6c9f8648.js"><link rel="prefetch" href="/blog/assets/js/9.6f7602a8.js">
    <link rel="stylesheet" href="/blog/assets/css/1.styles.62f82482.css"><link rel="stylesheet" href="/blog/assets/css/styles.fe65c3d9.css"><link rel="stylesheet" href="/blog/assets/css/styles.fe65c3d9.css"><link rel="stylesheet" href="/blog/assets/css/8.styles.b27390c7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-neon"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(https://yz.lol.qq.com/v1/assets/images/void-the-touch-of-the-void.jpg);" data-v-7ef4a8f4><div data-v-7c9b6a1e data-v-7ef4a8f4><nav class="navbar" data-v-7c9b6a1e><div class="container" data-v-7c9b6a1e><a href="/blog/" class="router-link-active" data-v-7c9b6a1e><span class="navbar-site-name" data-v-7c9b6a1e>
          PINEHE-BLOG
        </span></a> <div class="navbar-toggler" data-v-7c9b6a1e><svg class="icon" style="font-size:1.2em;" data-v-7c9b6a1e data-v-7c9b6a1e><title data-v-7c9b6a1e data-v-7c9b6a1e>menu</title><use xlink:href="#icon-menu" data-v-7c9b6a1e data-v-7c9b6a1e></use></svg></div> <div class="navbar-links" data-v-7c9b6a1e><a href="/blog/" class="navbar-link" data-v-7c9b6a1e>
            Home
          </a><a href="/blog/posts/" class="navbar-link router-link-active" data-v-7c9b6a1e>
            Posts
          </a><a href="/blog/custom-pages/" class="navbar-link" data-v-7c9b6a1e>
            Custom Pages
          </a><a href="https://github.com/superuserhe/blog" target="_blank" rel="noopener noreferrer" class="navbar-link" data-v-7c9b6a1e>
            Github
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-7c9b6a1e></div></div> <div class="banner" data-v-e924d6e4 data-v-7ef4a8f4 data-v-7ef4a8f4><div class="container" data-v-e924d6e4><div class="center" data-v-e924d6e4><h1 data-v-e924d6e4 data-v-7ef4a8f4>
          ğŸš€ES6  Proxyå’ŒReflect
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-2c3a28f0 data-v-2c3a28f0><main class="main" data-v-2c3a28f0><div class="post" data-v-2c3a28f0 data-v-2c3a28f0><section class="post-meta main-div" data-v-1956e4d1><section class="post-date clearfix" data-v-1956e4d1><span class="create-date" data-v-1956e4d1>
      å‘å¸ƒæ—¶é—´ : 2019-04-08
    </span> <span class="update-date" data-v-1956e4d1>
      æœ€åä¿®æ”¹ : 2019-12-29
    </span></section> <section class="post-links" data-v-1956e4d1><a href="/blog/posts/2019/03/22/header-config-zh.html" class="post-link" data-v-1956e4d1>
      ä¸Šä¸€ç¯‡ : æ ‡é¢˜æ çš„è®¾ç½®
    </a> <a href="/blog/posts/2020/06/02/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83.html" class="post-link" data-v-1956e4d1>
      ä¸‹ä¸€ç¯‡ : ğŸš€å‰ç«¯ä»£ç è§„èŒƒ
    </a></section></section> <article class="main-div"><div class="post-content content default"><h1 id="proxyå’Œreflect"><a href="#proxyå’Œreflect" aria-hidden="true" class="header-anchor">#</a> Proxyå’ŒReflect</h1> <h2 id="proxy"><a href="#proxy" aria-hidden="true" class="header-anchor">#</a> proxy</h2> <blockquote><p>Proxyå¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ï¼Œèµ‹å€¼ï¼Œæšä¸¾ï¼Œå‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚</p></blockquote> <h3 id="è¯­æ³•"><a href="#è¯­æ³•" aria-hidden="true" class="header-anchor">#</a> è¯­æ³•</h3> <blockquote><p>let p = new Proxy(target, handler);</p></blockquote> <h4 id="target"><a href="#target" aria-hidden="true" class="header-anchor">#</a> <code>target</code></h4> <blockquote><p>ç”¨ProxyåŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚</p></blockquote> <h4 id="handler"><a href="#handler" aria-hidden="true" class="header-anchor">#</a> <code>handler</code></h4> <blockquote><p>ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§æ˜¯å½“æ‰§è¡Œä¸€ä¸ªæ“ä½œæ—¶å®šä¹‰ä»£ç†çš„è¡Œä¸ºçš„å‡½æ•°ã€‚</p></blockquote> <h3 id="get-target-propkey-receiver"><a href="#get-target-propkey-receiver" aria-hidden="true" class="header-anchor">#</a> <code>get(target, propKey, receiver)</code></h3> <p>æ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–ï¼Œæ¯”å¦‚<code>proxy.foo</code>å’Œ<code>proxy['foo']</code>ã€‚</p> <h3 id="set-target-propkey-value-receiver"><a href="#set-target-propkey-value-receiver" aria-hidden="true" class="header-anchor">#</a> <code>set(target, propKey, value, receiver)</code></h3> <p>æ‹¦æˆªå¯¹è±¡å±æ€§çš„è®¾ç½®ï¼Œæ¯”å¦‚<code>proxy.foo = v</code>æˆ–<code>proxy['foo'] = v</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p> <h3 id="has-target-propkey"><a href="#has-target-propkey" aria-hidden="true" class="header-anchor">#</a> <code>has(target, propKey)</code></h3> <p>æ‹¦æˆª<code>propKey in proxy</code>çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p> <h3 id="deleteproperty-target-propkey"><a href="#deleteproperty-target-propkey" aria-hidden="true" class="header-anchor">#</a> <code>deleteProperty(target, propKey)</code></h3> <p>æ‹¦æˆª<code>delete proxy[propKey]</code>çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p> <h3 id="ownkeys-target"><a href="#ownkeys-target" aria-hidden="true" class="header-anchor">#</a> <code>ownKeys(target)</code></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//åŸå§‹å¯¹è±¡ obj</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  time<span class="token punctuation">:</span><span class="token string">'2017-02-12'</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span><span class="token string">'net'</span><span class="token punctuation">,</span>
  _r<span class="token punctuation">:</span><span class="token number">123</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//æ–°æˆä¸€ä¸ªå¯¹è±¡ï¼Œæ˜ å°„objï¼ŒåŸå§‹å¯¹è±¡çš„ä»£ç†ã€‚</span>
<span class="token keyword">let</span> monitor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token comment">//åœ¨è¯»å–å¯¹è±¡æ—¶,å°†'2017'ä¿®æ”¹ä¸º'2018'</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'2017'</span><span class="token punctuation">,</span><span class="token string">'2018'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//åœ¨è®¾ç½®å¯¹è±¡æ—¶ï¼Œåªæœ‰keyä¸º'name'çš„å€¼å¯è¢«ä¿®æ”¹</span>
  <span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//åœ¨keyä¸ä¸º'name'æ—¶ï¼Œæ‹¦æˆªinæ“ä½œã€‚</span>
  <span class="token function">has</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//å«æœ‰'_'çš„keyæ‰å¯ä»¥è¢«deletedæ“ä½œç¬¦åˆ é™¤</span>
  <span class="token function">deleteProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">delete</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//æ‹¦æˆªé™¤äº†keyä¸º'time'çš„Object.getOwnPropertyNames(proxy)ï¼ŒObject.getOwnPropertySymbols(proxy)ï¼ŒObject.keys(proxy)</span>
  <span class="token function">ownKeys</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item<span class="token operator">=&gt;</span>item<span class="token operator">!=</span><span class="token string">'time'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//get</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>monitor<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¯¹è±¡ä»£ç† '2018-02-12'</span>

<span class="token comment">//set</span>
monitor<span class="token punctuation">.</span>time <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>monitor<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//'2018-02-12'</span>

<span class="token comment">//has</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`has:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token string">'time'</span> <span class="token keyword">in</span> monitor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//has:false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`has:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token string">'name'</span> <span class="token keyword">in</span> monitor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//has:true</span>

<span class="token comment">//deleteProperty</span>
<span class="token keyword">delete</span> monitor<span class="token punctuation">.</span>_r<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Proxy {time: &quot;2017-02-12&quot;, name: &quot;net&quot;}</span>
<span class="token keyword">delete</span> monitor<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Proxy {time: &quot;2017-02-12&quot;, name: &quot;net&quot;}</span>

<span class="token comment">//wonKeys</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[]</span>
</code></pre></div><h2 id="reflect"><a href="#reflect" aria-hidden="true" class="header-anchor">#</a> Reflect</h2> <h4 id="reflectçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„-reflectæ²¡æœ‰æ„é€ å‡½æ•°ã€‚"><a href="#reflectçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„-reflectæ²¡æœ‰æ„é€ å‡½æ•°ã€‚" aria-hidden="true" class="header-anchor">#</a> Reflectçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„,<code>Reflect</code>æ²¡æœ‰æ„é€ å‡½æ•°ã€‚</h4> <blockquote><p>new Reflect() //é”™è¯¯çš„å†™æ³•</p></blockquote> <h3 id="è®¾è®¡ç›®åœ°"><a href="#è®¾è®¡ç›®åœ°" aria-hidden="true" class="header-anchor">#</a> è®¾è®¡ç›®åœ°</h3> <ul><li>å°†Objectå¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚Object.definePropertyï¼‰ï¼Œæ”¾åˆ°Reflectå¯¹è±¡ä¸Šã€‚</li> <li>ä¿®æ”¹æŸäº›Objectæ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚</li> <li>è®©Objectæ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚</li> <li>Reflectå¯¹è±¡çš„æ–¹æ³•ä¸Proxyå¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯Proxyå¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨Reflectå¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚</li></ul> <h3 id="æ–¹æ³•-get-set-has-deleteproperty-ownkeys"><a href="#æ–¹æ³•-get-set-has-deleteproperty-ownkeys" aria-hidden="true" class="header-anchor">#</a> æ–¹æ³• (get, set, has, deleteProperty, ownKeys)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span>
  time<span class="token punctuation">:</span><span class="token string">'2017-03-11'</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span><span class="token string">'net'</span><span class="token punctuation">,</span>
  _r<span class="token punctuation">:</span><span class="token number">123</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//get</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Reflect get'</span><span class="token punctuation">,</span>Reflect<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'time'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Reflect get 2017-03-11</span>

<span class="token comment">//set</span>
Reflect<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'Reflect'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{time: &quot;2017-03-11&quot;, name: &quot;Reflect&quot;, _r: 123}</span>

<span class="token comment">//has</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'has'</span><span class="token punctuation">,</span>Reflect<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>

<span class="token comment">//deleteProperty</span>
Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{time: &quot;2017-03-11&quot;, _r: 123}</span>

<span class="token comment">//ownKeys</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//(2) [&quot;time&quot;, &quot;_r&quot;]</span>
</code></pre></div><h2 id="proxyå’Œreflectå®ä¾‹"><a href="#proxyå’Œreflectå®ä¾‹" aria-hidden="true" class="header-anchor">#</a> Proxyå’ŒReflectå®ä¾‹</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//æ•ˆéªŒå‡½æ•° obj æ•ˆéªŒå‡½æ•°ã€‚</span>
<span class="token keyword">function</span> <span class="token function">validator</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>validator<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token comment">//è¿”å›ä¸€ä¸ªproxyä»£ç†å¯¹è±¡</span>
    _validator<span class="token punctuation">:</span>validator<span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">,</span>value<span class="token punctuation">,</span>proxy<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//æ˜¯å¦å«æœ‰è¯¥keyå€¼ã€‚</span>
        <span class="token keyword">let</span> va <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_validator<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token function">va</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//ä¿®æ”¹çš„value æ˜¯å¦ç¬¦åˆæ•ˆéªŒå‡½æ•°ã€‚</span>

          <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">,</span>value<span class="token punctuation">,</span>proxy<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†å€¼åˆ†é…ç»™å±æ€§çš„å‡½æ•°ã€‚è¿”å›ä¸€ä¸ªBooleanï¼Œå¦‚æœæ›´æ–°æˆåŠŸï¼Œåˆ™è¿”å›true</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`ä¸èƒ½è®¾ç½®</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">åˆ°</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ä¸å­˜åœ¨`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> personCalidators <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">name</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">age</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">&amp;&amp;</span> val <span class="token operator">&gt;</span> <span class="token number">18</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">validator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>personCalidators<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'hmm'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Proxy {name: &quot;hmm&quot;, age: 19}</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//ä¸èƒ½è®¾ç½®ageåˆ°10</span>
</code></pre></div></div></article> <section class="post-meta main-div" data-v-1956e4d1><section class="post-date clearfix" data-v-1956e4d1><span class="create-date" data-v-1956e4d1>
      å‘å¸ƒæ—¶é—´ : 2019-04-08
    </span> <span class="update-date" data-v-1956e4d1>
      æœ€åä¿®æ”¹ : 2019-12-29
    </span></section> <section class="post-links" data-v-1956e4d1><a href="/blog/posts/2019/03/22/header-config-zh.html" class="post-link" data-v-1956e4d1>
      ä¸Šä¸€ç¯‡ : æ ‡é¢˜æ çš„è®¾ç½®
    </a> <a href="/blog/posts/2020/06/02/%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83.html" class="post-link" data-v-1956e4d1>
      ä¸‹ä¸€ç¯‡ : ğŸš€å‰ç«¯ä»£ç è§„èŒƒ
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-2c3a28f0><div class="info-card main-div" data-v-6ed40700 data-v-2c3a28f0><div class="info-card-header" data-v-6ed40700><img src="/blog/assets/img/pine.jpg" alt="pineHe" class="info-avatar" data-v-6ed40700></div> <div class="info-card-body" data-v-6ed40700><section class="info-nickname" data-v-6ed40700>
      pineHe
    </section> <section class="info-desc" data-v-6ed40700>Happy Coding<br/>Happy Life</section> <section class="info-contact" data-v-6ed40700><section data-v-6ed40700><span title="Shen'zhen City, China" data-v-6ed40700 data-v-6ed40700><svg class="icon" style="font-size:1em;" data-v-6ed40700 data-v-6ed40700><title data-v-6ed40700 data-v-6ed40700>Shen'zhen City, China</title><use xlink:href="#icon-location" data-v-6ed40700 data-v-6ed40700></use></svg><span class="info-text" data-v-6ed40700 data-v-6ed40700>
          Shen'zhen City, China
        </span></span></section> <section data-v-6ed40700><span title="Shen'zhen Private Enterprise" data-v-6ed40700 data-v-6ed40700><svg class="icon" style="font-size:1em;" data-v-6ed40700 data-v-6ed40700><title data-v-6ed40700 data-v-6ed40700>Shen'zhen Private Enterprise</title><use xlink:href="#icon-organization" data-v-6ed40700 data-v-6ed40700></use></svg><span class="info-text" data-v-6ed40700 data-v-6ed40700>
          Shen'zhen Private Enterprise
        </span></span></section> <section data-v-6ed40700><a href="mailto:jsonHe557@163.com" title="jsonHe557@163.com" data-v-6ed40700 data-v-6ed40700><svg class="icon" style="font-size:1em;" data-v-6ed40700 data-v-6ed40700><title data-v-6ed40700 data-v-6ed40700>jsonHe557@163.com</title><use xlink:href="#icon-email" data-v-6ed40700 data-v-6ed40700></use></svg><span class="info-text" data-v-6ed40700 data-v-6ed40700>
          jsonHe557@163.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-6ed40700><section class="info-sns clearfix" data-v-6ed40700><a href="https://github.com/superuserhe/blog" target="_blank" class="sns-link" data-v-6ed40700><span title="GitHub: superuserhe" class="sns-icon" data-v-6ed40700 data-v-6ed40700><svg class="icon" style="font-size:1.5em;" data-v-6ed40700 data-v-6ed40700><title data-v-6ed40700 data-v-6ed40700>GitHub: superuserhe</title><use xlink:href="#icon-github" data-v-6ed40700 data-v-6ed40700></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-2c3a28f0><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>æ–‡ç« ç›®å½•</span> <div class="post-nav-toc"><ul><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#proxy">proxy</a><ul><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#è¯­æ³•">è¯­æ³•</a></li><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#get-target-propkey-receiver">get(target, propKey, receiver)</a></li><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#set-target-propkey-value-receiver">set(target, propKey, value, receiver)</a></li><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#has-target-propkey">has(target, propKey)</a></li><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#deleteproperty-target-propkey">deleteProperty(target, propKey)</a></li><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#ownkeys-target">ownKeys(target)</a></li></ul></li><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#reflect">Reflect</a><ul><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#è®¾è®¡ç›®åœ°">è®¾è®¡ç›®åœ°</a></li><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#æ–¹æ³•-get-set-has-deleteproperty-ownkeys">æ–¹æ³• (get, set, has, deleteProperty, ownKeys)</a></li></ul></li><li><a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#proxyå’Œreflectå®ä¾‹">Proxyå’ŒReflectå®ä¾‹</a></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/blog/posts/2019/04/08/es6-proxy%E5%92%8Creflect.html#post-comments">
      è¯„è®º
    </a></div></div></aside></div> <footer class="footer" data-v-7fbc03fc><p class="sns-links" data-v-7fbc03fc><a href="https://github.com/superuserhe/blog" target="_blank" class="sns-link" data-v-7fbc03fc><span title="GitHub: superuserhe" class="sns-icon" data-v-7fbc03fc data-v-7fbc03fc><svg class="icon" style="font-size:25px;" data-v-7fbc03fc data-v-7fbc03fc><title data-v-7fbc03fc data-v-7fbc03fc>GitHub: superuserhe</title><use xlink:href="#icon-github" data-v-7fbc03fc data-v-7fbc03fc></use></svg></span></a></p> <p data-v-7fbc03fc><span data-v-7fbc03fc>Powered by </span> <a href="https://vuepress.vuejs.org" target="_blank" data-v-7fbc03fc>Vuepress</a></p></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/blog/assets/js/vendor.vue.5f1db0b8.js" defer></script><script src="/blog/assets/js/8.b27390c7.js" defer></script><script src="/blog/assets/js/27.a32093da.js" defer></script><script src="/blog/assets/js/vendor.commons.62f82482.js" defer></script><script src="/blog/assets/js/app.fe65c3d9.js" defer></script>
  </body>
</html>
